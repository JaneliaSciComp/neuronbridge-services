{
    "jobDefinitionName": "AlignStackAndGenerateMIPs",
    "type": "container",
    "parameters": {
        "shape": "Unknown",
        "iam_role": "auto",
        "debug_flag": "false"
    },
    "containerProperties": {
        "image": "cgoina/aligner_with_color_depth:1.0",
        "vcpus": 8,
        "memory": 8192,
        "command": [
            "/opt/aligner-scripts/run_aligner_using_s3.sh",
            "--area", "Ref::area",
            "--shape", "Ref::shape",
            "--gender", "Ref::gender",
            "--isize", "Ref::image_size",
            "--vsize", "Ref::voxel_size",
            "--mprotocol", "Ref::mounting_protocol",
            "--objective", "Ref::objective",
            "--nchannels", "Ref::nchannels",
            "--refchannel", "Ref::reference_channel",
            "--templates-s3bucket-name", "Ref::templates_bucket",
            "--inputs-s3bucket-name", "Ref::inputs_bucket",
            "--outputs-s3bucket-name", "Ref::outputs_bucket",
            "-i", "Ref::input_filename",
            "-o", "Ref::output_folder",
            "--nslots", "Ref::nslots",
            "--use-iam-role", "Ref::iam_role",
            "-debug", "Ref::debug_flag"
        ],
        "jobRoleArn": "arn:aws:iam::777794738451:role/service-role/AWSBatchServiceRole",
        "volumes": [
            {
                "host": {
                    "sourcePath": "/scratch_volume/data"
                },
                "name": "scratch_data_volume"
            },
            {
                "host": {
                    "sourcePath": "/scratch_volume/tmp"
                },
                "name": "scratch_tmp_volume"
            }
        ],
        "environment": [
            {
                "name": "FB_MODE",
                "value": "xvfb"
            }
        ],
        "mountPoints": [
            {
                "containerPath": "/scratch",
                "readOnly": false,
                "sourceVolume": "scratch_data_volume"
            },
            {
                "containerPath": "/tmp",
                "readOnly": false,
                "sourceVolume": "scratch_tmp_volume"
            }
        ],
        "readonlyRootFilesystem": true,
        "privileged": true,
        "ulimits": [
        ],
        "user": "",
        "resourceRequirements": [
        ],
        "linuxParameters": {
            "devices": [
                {
                    "hostPath": "/dev/fuse",
                    "containerPath": "",
                    "permissions": [
                        "READ",
                        "WRITE",
                        "MKNOD"
                    ]
                }
            ]
        }
    },
    "retryStrategy": {
        "attempts": 1
    },
    "timeout": {
        "attemptDurationSeconds": 15000
    }
}
